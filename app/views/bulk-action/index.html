{% extends "_templates/_page.html" %}

{% set pageHeading = "Update records and recommend trainees for teacher status" %}
{% set navActive = 'bulk' %}

{% set registeredTrainees = data.filteredRecords | filterByStatus("Draft", true) %}
{% set currentTrainees = registeredTrainees | filterByActive %}

{% set recordsWithMissingInformation = currentTrainees | filterByIncomplete | length %}
{% set recordsReadyToBeRecommended = currentTrainees | filterByComplete | length %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">
      <h1 class="govuk-heading-xl">
        <span class="govuk-caption-l">{{ data.signedInProviders | andSeparate }}</span>
        {{ pageHeading }}
      </h1>
      {% if recordsWithMissingInformation %}
        <h2 class="govuk-heading-m">
          Update incomplete records
        </h2>
        {# To do - filterByIncomplete shouldn't contain withdrawn records #}
        <p class="govuk-body">
          You have {{ currentTrainees | filterByIncomplete | length }} trainees that need more information before they can be recommended for teacher status.
        </p>
        <p class="govuk-body">
          <a href="/bulk-action/update-incomplete-records">Update incomplete records</a>
        </p>
      {% endif %}
      <h2 class="govuk-heading-m">
        Recommend trainees for teacher status
      </h2>
      <p class="govuk-body">
        You have {{ currentTrainees | filterByComplete | length }} trainees ready to be recommend for teacher status. To recommend these trainees:
      </p>
      <p class="govuk-body">
        <a href="/bulk-action/recommend-trainees-for-teacher-status">Recommend trainees for teacher status</a>
      </p>
    </div>
  </div>

{% endblock %}
